---
title: "Solutions for Homework 2"
author: "Jiajun Tao"
date: 2022-09-27
output: github_document
---

```{r setup, include = FALSE}
library(tidyverse)
```

# Problem 1
```{r}
nyc_transit_df1 = read_csv('data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv')
nyc_transit_df = read_csv('data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv', col_types = 'cccddccccccccccccccccclclcccddcc') %>% 
  janitor::clean_names() %>% 
  select(line:entry, vending, ada) %>% 
  mutate(
    entry = recode(entry, 'YES' = TRUE, 'NO' = FALSE)
  )
dim(nyc_transit_df)
```

This dataset contains the entrance and exit data of NYC Transit Subway. The variables are division, line, station name, station latitude/longitude, routes served, entrance type and so on. So far, I have read the data, cleaned the variable names, selected the variables interested, and converted the `entry` variable from character to logical. Now the resulting dataset has `r nrow(nyc_transit_df)` rows and `r ncol(nyc_transit_df)` columns.

These data are not tidy by now. For examples, there are too many variables regarding routes served.

There are `r nrow(distinct(nyc_transit_df, station_name))` distinct stations.

`r nrow((filter(nyc_transit_df, ada == TRUE)))` stations are ADA compliant.

The proportion of station entrances / exits without vending allow entrance is `r round(nrow(filter(nyc_transit_df, vending == 'NO' & entry == TRUE)) / nrow(filter(nyc_transit_df, vending == 'NO')),2)`

```{r}
nyc_transit_df = 
  pivot_longer(
    nyc_transit_df,
    route1:route11,
    names_to = 'route_number',
    values_to = 'route_name'
    )
A_df = filter(nyc_transit_df, route_name == 'A')
nrow(distinct(A_df, station_name))
nrow(filter(A_df, ada == TRUE))  
  
```




